olithink 9 "4R3/2p2pk1/5p2/1p1q1bp1/1Q1P3p/2P2P2/r1P3PP/4N1K1 b - - 0 28"
go
 1    97      0        41  f5xc2
 2    91      0       238  f5xc2 g2-g4
 3    92      1      2121  f5xc2 b4-f8 g7-g6 f8-h8
 4    81      3      8450  f5xc2 e1xc2 a2xc2 g1-h1
 5    27     10     76691  f5xc2 b4-f8 g7-g6 f8-g8 g6-h6 g8-h8 c2-h7 h8xf6
 6    25     28    209639  d5-d6 b4xb5 f5-d7 b5-b1 a2-a3 e8-b8
 7    32     54    565826  d5-d6 b4xb5 f5xc2 b5-c4 a2-a1 g1-f2 c2-f5
 8    28    271   2368830  d5-d6 b4xb5 f5-d7 b5-b1 a2-a3 e8-b8 a3xc3 b1-d1
 9    68    607   7200522  d5-d6 b4xb5 f5-d7 b5-b1 a2-a3 e8-b8 a3xc3 b1-b4 d6xb4
10    46   2931  30042953  d5-d6 b4xd6 c7xd6 e8-b8 f5xc2 b8xb5 c2-g6 b5-b8 a2-e2 g1-f1
28. ... d5-d6

kib Nodes: 7200522 QNodes1: 1784316 QNodes2: 1641655 Evals: 3533734 cs: 604 knps: 1190
kib Nodes: 30042953 QNodes1: 9621173 QNodes2: 7909133 Evals: 18414326 cs: 2931 knps: 1024

olithink 9 "r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq -"
go
 1    19      0        49  e2xa6
 2    19      0       185  e2xa6 b4xc3
 3     6      1      2695  e2xa6 e6xd5 c3xd5
 4     6      3      8431  e2xa6 e6xd5 c3xd5 b6xd5
 5   -28     15     66583  d5xe6 e7xe6 e2xa6 e6xe5 d2-f4
 6   -51     53    248451  d5xe6 e7xe6 e2xa6 e6xe5 d2-f4 e5-d4
 7   -47    146   1273355  d5xe6 e7xe6 e2xa6 e6xe5 d2-f4 e5-d4 a1-d1
 8   -56    600   5367197  d5xe6 e7xe6 e2xa6 e6xe5 d2-f4 e5-e6 c3-b5 b6-d5
 9   -66   2268  24495420  d5xe6 a6xe2 c3xe2 e7xe6 d2-f4 c7-c5 g2xh3 d7-d6 e5-c6
1. ... d5xe6

kib Nodes: 24495420 QNodes1: 12047196 QNodes2: 10252197 Evals: 6428268 cs: 2268 knps: 1079

olithink 8 "1r1q1rk1/5ppp/Qpp1b3/4n3/8/2N1PB2/PPP3PP/R3K2R w KQ - 0 22"
go
 1    91      0        46  e1-g1
 2    49      0       290  e1-g1 d8-h4
 3    48      1      3530  h2-h4 e6-c4 a6-a7
 4    57      4     18994  a6-a4 d8-g5 a4-f4 f7-f6
 5    26     18    125718  a6-f1 f7-f5 b2-b3 d8-h4 e1-d1 b8-d8
 6     7     76    516376  h2-h4 e5-c4 a1-d1 d8-c7 e1-f2 c4xb2
 7   -10    218   1904538  h2-h4 e6-c4 a6-a3 b8-a8 c3-a4 e5xf3 g2xf3 f7-f5
 8     8   2404  21396595  a6-e2 d8-h4 e1-d1 f7-f5 d1-c1 e6-c4 e2-e1 h4xe1 h1xe1 b8-d8
22. ... a6-e2

kib Nodes: 21396595 QNodes1: 6692208 QNodes2: 7777853 Evals: 18348842 cs: 2404 knps: 889

olithink 11 "6k1/p7/1p1p4/1PpP3p/2P1q1pP/P5P1/6RQ/5rNK w - - 0 1"
go
 1   173      0         3  a3-a4
 2   173      0        46  a3-a4 e4xc4
 3    62      0       213  a3-a4 e4xc4 g2-f2
 4    62      0      1684  a3-a4 e4xc4 g2-f2 c4xd5
 5   -28      1      5620  a3-a4 g8-h7 a4-a5 b6xa5 b5-b6
 6   -28      1     29162  a3-a4 g8-h7 a4-a5 b6xa5 b5-b6 a7xb6
 7 -1023      6     80463  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3
 8 -1023     15    313453  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3
 9 -31990     53    822539  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2
10 -31990    121   2355673  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2 e4xg2
11 -31990    304   5476917  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2 e4xg2
1. ... a3-a4

kib Nodes: 5476917 QNodes1: 1329956 QNodes2: 722074 Evals: 429538 cs: 304 knps: 1796

olithink 17 "//3k4///3KR3// w - - 0 1"
go
 1   576      0        18  d3-c4
 2   528      0        63  d3-c4 d6-c6
 3   580      0       418  d3-c4 d6-c6 e3-e6
 4   576      0      3135  e3-g3 d6-c6 g3-g6 c6-c5 d3-e4
 5   580      1     12810  d3-d4 d6-d7 e3-g3 d7-c7 g3-g6
 6   572      6     57317  d3-d4 d6-c6 e3-c3 c6-b7 c3-a3 b7-b8 d4-e4
 7   580     15    122948  d3-d4 d6-c6 e3-e7 c6-b6 e7-e1 b6-b5 e1-a1
 8   576     35    379843  d3-d4 d6-c6 e3-e7 c6-b6 d4-c4 b6-a6 c4-b4 a6-b6
 9   580     59    755334  d3-d4 d6-c6 e3-e7 c6-d6 e7-a7 d6-e6 a7-a5 e6-e7 a5-a6
10   580    101   1542577  d3-d4 d6-c7 d4-d5 c7-d7 e3-c3 d7-e7 c3-c7 e7-f6 c7-c8 f6-g5 c8-c6
11   584    145   2400172  d3-d4 d6-c6 e3-e6 c6-c7 d4-c5 c7-d7 e6-d6 d7-c7 d6-b6 c7-d8 b6-b7 d8-c8 b7-a7
12   584    210   3731156  d3-d4 d6-c6 e3-e6 c6-c7 d4-c5 c7-d7 e6-f6 d7-e7 f6-g6 e7-f7 g6-b6 f7-g7 c5-d5
13   584    298   5577831  d3-d4 d6-c6 e3-e6 c6-d7 d4-d5 d7-c7 e6-e7 c7-b6 e7-d7 b6-b5 d7-b7 b5-a6 d5-c6 a6-a5 b7-b8 a5-a4
14   584    414   8116749  d3-d4 d6-c6 e3-e6 c6-d7 d4-d5 d7-c7 e6-e7 c7-b6 e7-e1 b6-c7 e1-b1 c7-d8 b1-b7 d8-e8 d5-d6 e8-f8
15   588    515  10527615  d3-d4 d6-c6 e3-e6 c6-d7 d4-d5 d7-c7 d5-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-d8 c5-d6 d8-c8 e7-d7 c8-b8 d6-e6
16 31983    625  13279670  d3-c4 d6-c6 e3-d3 c6-b6 d3-d6 b6-b7 c4-b5 b7-c7 d6-d5 c7-b7 d5-c5 b7-a7 b5-c6 a7-a8 c6-c7 a8-a7 c5-a5
17 31983    762  16996617  d3-c4 d6-c6 e3-d3 c6-b6 d3-d6 b6-b7 c4-b5 b7-c7 d6-d5 c7-b7 d5-c5 b7-a7 b5-c6 a7-a8 c6-c7 a8-a7 c5-a5
1. ... d3-c4

kib Nodes: 16996617 QNodes1: 417249 QNodes2: 0 Evals: 6726694 cs: 762 knps: 2228

olithink 8 "1r2k1r1/pbppnp1p/1bn2P2/7q/Q7/B1PB1N2/P4PPP/3RR1K1 b - - 0 19"
go
 1   478      0        46  h5xf3
 2   700      1       350  h5xf3 e1xe7
 3   710      3      2789  h5xf3 d3-f1 f3xf2
 4   767      7     13012  h5xf3 d3-e4 b6xf2 g1-h1 f3xf6
 5   182     86    201947  h5xf3 e1xe7 e8-d8 d3-e4 f3xf2 g1-h1 f2xf6
 6   186    128    461351  h5xf3 e1xe7 e8-d8 d3-e4 f3xf6 e7xd7 d8-c8 a4-c2
 7   112    692   3982215  h5-h3 d3-f1 h3-f5 g1-h1 f5xf6 a3xe7 c6xe7
 8    97   1446  10067788  h5-h3 d3-f1 h3-f5 a3xe7 f5xf3 g1-h1 f3-h5 e7-c5
19. ... h5-h3

kib Nodes: 10067788 QNodes1: 3970449 QNodes2: 11820496 Evals: 6925340 cs: 1447 knps: 695

olithink 9 "2k3r1/5p1p/p3bp2/1pn4q/2p1B3/4QN1P/PPP2PP1/2KR4 b - - 0 21"
go
 1   104      0        39  c5xe4
 2   122      0       327  g8xg2 d1-d5
 3   127      1      1875  g8xg2 e4xh7 e6xh3
 4   105      3     13433  c5xe4 e3xe4 h5-h6 c1-b1 g8xg2
 5    16     15    120692  c5xe4 e3xe4 c8-b8 e4-f4 b8-b7 f4-e4
 6    11     42    361086  g8xg2 d1-d5 c5-d3 c2xd3 e6xd5 e3-c5 c8-d8 e4xd5
 7     7    131   1219604  g8xg2 e4-a8 g2-g7 d1-d5 c5-d3 c2xd3 e6xd5 e3-c5
 8   -10    515   5585296  c5xe4 e3xe4 h5-h6 c1-b1 c8-c7 f3-d4 e6-d7 f2-f4 c7-c8
 9   -31   1859  19326227  c5xe4 e3xe4 h5-h6 c1-b1 c8-b8 e4-c6 e6-c8 d1-g1 h6-f4 g2-g4
21. ... c5xe4

kib Nodes: 19326227 QNodes1: 6634943 QNodes2: 6662746 Evals: 10129110 cs: 1859 knps: 1039

olithink 12 "8/8/1P1p4/K1p2r2/4P1Pk/8/1R3p2/8 w - - 0 5"
go
 1   -22      0        18  b6-b7
 2   -22      0        76  b6-b7 f2-f1q
 3   -22      0       411  b6-b7 f2-f1q b7-b8q
 4   -85      1      1905  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q
 5  -144      1      6474  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q f1-a1
 6  -141      1     16282  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q f1-a1 a5-b6 f5-f6
 7  -325      7     73028  b6-b7 f2-f1q b2-h2 h4-g3 g4xf5 f1-b1 h2-h7 g3-f3
 8  -340     14    135572  g4xf5 f2-f1q b2-h2 h4-g3 b6-b7 f1-b1 h2-h7 b1-b4 a5-a6 g3-f3
 9  -334     26    252872  g4xf5 f2-f1q b2-h2 h4-g3 b6-b7 f1-b1 h2-h7 g3-f3 h7-e7 b1-b3
10  -280     67    750915  b2xf2 f5xf2 b6-b7 f2-b2 a5-a6 h4xg4 a6-a7 d6-d5 b7-b8q b2xb8
11  -280    185   2166799  b2xf2 f5xf2 b6-b7 f2-b2 a5-a6 h4xg4 a6-a7 d6-d5 b7-b8q b2xb8 a7xb8
12  -280   1142  13603402  b2-b1 f2-f1q b1xf1 f5xf1 b6-b7 f1-b1 a5-a6 h4xg4 a6-a7 d6-d5 b7-b8q b1xb8
5. ... b2-b1

kib Nodes: 13603402 QNodes1: 3196935 QNodes2: 2758874 Evals: 10373582 cs: 1142 knps: 1190

****
olithink 11 "3Q4/8/1kp3p1/p1p1p2p/P3q2P/1P4r1/5rR1/6RK b - - 0 44"
go
 1   417      0        61  b6-b7 d8-d7
 2   390      0       367  b6-b7 d8-d7 b7-a6 d7-c8
 3   387      1      1103  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7
 4   285      1      3514  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7xa5
 5     0      1     10310  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
 6     0      3     25103  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
 7     0      6     60713  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
 8     0     14    147183  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
 9     0     28    322535  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
10     0     65    757414  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
11     0    178   2131254  b6-b7 d8-d7 b7-a6 d7-c8 a6-a7 c8-c7 a7-a8 c7-c8 a8-a7
44. ... b6-b7

kib Nodes: 2131254 QNodes1: 437643 QNodes2: 423783 Evals: 1102838 cs: 178 knps: 1195

olithink 13 "8/k7/3R2p1/p1p1p2p/q6P/6r1/6r1/7K w - - 0 8"
go
 1 -2580      0        14  d6-a6
 2 -2018      1       129  d6-d7 a7-b6 d7-d6
 3 -2580      1       540  d6-a6 a7-b7 a6-a7 b7-b6 a7-b7
 4 -2584      1      1010  d6-a6 a7-b7 a6-b6 b7-c7 b6-b7 c7-c6 b7-b6
 5 -2580      1      2774  d6-d7 a7-a8 d7-d8 a8-b7 d8-b8 b7-c7 b8-c8 c7-d7 c8-d8
 6 -2580      1      5380  d6-d7 a7-a8 d7-a7 a8-b8 a7-b7 b8-c8 b7-b8 c8-c7 b8-c8 c7-d7 c8-d8
 7 -2580      3     10031  d6-d7 a7-a8 d7-a7 a8-b8 a7-a8 b8-c7 a8-a7 c7-c6 a7-a6 c6-b7 a6-b6 b7-c7 b6-b7
 8 -2576      4     35022  d6-d7 a7-b8 d7-b7 b8-c8 b7-c7 c8-d8 c7-d7 d8-e8 d7-e7 e8-f8 e7-f7 f8-g8 f7-g7 g8-h8 g7-h7
 9 -1106     12    187138  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4xa4 g2-d2 a4xa5 g3-h3 h1-g1 h3xh4
10 -1165     23    350118
11 -1116     65    960264  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4-d4 d5-e6 d4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4xg4 g1xg4
12 -1210    157   2656118  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4-d4 d5-e6 d4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4xg4 g1xg4 h3-h2
13 -1151    467   8321500
8. ... d6-d7

kib Nodes: 8321500 QNodes1: 1145258 QNodes2: 319239 Evals: 2035622 cs: 468 knps: 1775

go
 1 -2548      0        14  d6-a6
 2 -2042      0       139  d6-d7 a7-b6 d7-d6
 3 -2548      0       594  d6-a6 a7-b7 a6-b6 b7-c7 b6-b7
 4 -2552      1      1136  d6-a6 a7-b7 a6-b6 b7-c7 b6-c6 c7-d7 c6-c7
 5 -2540      3      3828  d6-d7 a7-a8 d7-a7 a8-b8 a7-b7 b8-c8 b7-c7 c8-d8 c7-c8
 6 -2544      4      9482  d6-d7 a7-b8 d7-b7 b8-c8 b7-c7 c8-d8 c7-d7 d8-e8 d7-e7 e8-f8 e7-f7
 7 -2544      7     23539  d6-d7 a7-a8 d7-a7 a8-b8 a7-b7 b8-c8 b7-c7 c8-d8 c7-d7 d8-e8 d7-e7 e8-f8 e7-f7
 8 -2009     18     84543  d6-d7 a7-b8 d7-d8 b8-c7 d8-d7 c7-b6 d7-d6 b6-b7 d6-d7 b7-c6 d7-d6 c6-b5 d6-b6 b5-c4 b6-d6
 9 -1082     40    354055  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-c3 b4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4xa5
10 -1118     98   1042292  d6-d7 a7-a6 d7-d6 a6-b7 d6-d7 b7-b8 d7-d8 b8-c7 d8-d7 c7-b6 d7-d6 b6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4-d4 d5-e6 d4xa4
11 -1140    361   4186724  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4-d4 d5-e6 d4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4xg4 g1xg4
12 -1206   2514  29186333  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4-a2 g1-h1 a2-h2 h1xh2 h3xh2 g4xh4
13 -1206  14579 173275538  d6-d7 a7-a6 d7-d6 a6-b5 d6-b6 b5-c4 b6-b4 c4-d5 b4-d4 d5-e6 d4xa4 g2-g1 h1-h2 g3-g2 h2-h3 g2-g4 a4xg4 g1xg4 h3-h2 g4xh4
8. ... d6-d7

kib Nodes: 173275538 QNodes1: 29991285 QNodes2: 6061353 cs: 14581 knps: 1188



[Event "Computer chess game"]
[Site "TARN"]
[Date "2008.01.17"]
[Round "-"]
[White "OliThink 5.0.4"]
[Black "GNU Chess 5.07"]
[Result "1-0"]
[TimeControl "40/60"]

1. d4 d5 2. Bf4 Nc6 3. e3 e5 4. Bxe5 Nxe5 5. dxe5 Bb4+ 6. c3 Bc5 7. Nf3 Ne7
8. b4 Bb6 9. Bd3 Bf5 10. Bxf5 Nxf5 11. a4 a5 12. g4 Ne7 13. bxa5 Bxa5 14.
Qb3 Qd7 15. Nbd2 O-O 16. h3 Qe6 17. Rc1 f6 18. exf6 Qxf6 19. O-O Qh6 20.
Kg2 Qc6 21. Kh1 Bb6 22. Ra1 Ra6 23. Ra2 Ba5 24. Rc1 Rb6 25. Qa3 Qf6 26. h4
Rc6 27. Rac2 b6 28. h5 Rd6 29. Qb3 Qe6 30. Rg1 Qd7 31. Ne5 Qe8 32. f4 c5
33. Ndf3 c4 34. Qa3 Rh6 35. Rh2 Nc6 36. Rd1 Ne7 37. Nd4 Kh8 38. Nb5 Kg8 39.
Rhd2 Nc6 40. Nc7 Qc8 41. Nxd5 Qe6 42. Nc7 Qc8 43. Nxc6 Rxc6 44. Nd5 Qxg4
45. Ne7+ Kf7 46. Nxc6 Qxh5+ 47. Kg1 Qg6+ 48. Kf2 Qxc6 49. Rd7+ Kg8 50.
Rxg7+ Kxg7 51. Qe7+ Rf7 52. Rg1+ Qg6 53. Qe5+ Kf8 54. Rxg6 hxg6 55. Qd4 Rf5
56. Kf3 Ke7 57. Qg7+ Kd8 58. Qxg6 Rc5 59. Qg7 Rc7 60. Qh8+ Kd7 61. f5 Rc5
62. Qh7+ Kd6 63. f6 Bxc3 64. f7 Ke7 65. Kg4 Rc8 66. f8=Q+ Kxf8 67. Qf5+ Ke7
68. Qxc8 Be1 69. Qxc4 Kd7 70. e4 Ba5 71. Qd4+ Ke8 72. e5 Kf7 73. Qd7+ Kg6
74. e6 Kf6 75. e7 b5 76. e8=Q bxa4 77. Qdf7#
{White mates} 1-0




	if (0 && !ch && null && d >= 3 && ply) {
		generateMoves(ch, c, ply);
		if (movenum[ply] > 5) {
			flags &= 960;
			w = -search(c^1, d - 3, ply + 1, -beta, -beta + 1, 0);
			flags = flagstore;

			if (w >= beta) {
				hashDB[hb & HMASK] = (hb & HINV) | (w + 32768); 
				return beta;
			}
		}
	}




========================================================================
    CONSOLE APPLICATION : OliThink Project Overview
========================================================================

AppWizard has created this OliThink application for you.  

This file contains a summary of what you will find in each of the files that
make up your OliThink application.


OliThink.vcproj
    This is the main project file for VC++ projects generated using an Application Wizard. 
    It contains information about the version of Visual C++ that generated the file, and 
    information about the platforms, configurations, and project features selected with the
    Application Wizard.

OliThink.cpp
    This is the main application source file.

/////////////////////////////////////////////////////////////////////////////
Other standard files:

StdAfx.h, StdAfx.cpp
    These files are used to build a precompiled header (PCH) file
    named OliThink.pch and a precompiled types file named StdAfx.obj.

/////////////////////////////////////////////////////////////////////////////
Other notes:

AppWizard uses "TODO:" comments to indicate parts of the source code you
should add to or customize.

/////////////////////////////////////////////////////////////////////////////

int slist[128];
int swap(Move m) {
	int p, last, f = FROM(m);
	int t = TO(m);
	int c = ONMV(m);
	int oc = c^1;
	int n = 1;
	u64 b = (attacked(t, oc) ^ BIT[f]) & (~pinnedPieces(kingpos[c], c));
	u64 ob = attacked(t, c) & (~pinnedPieces(kingpos[oc], oc));
	slist[0] = pval[CAP(m)];
	last = -pval[PIECE(m)];
	if (PROM(m)) {
		slist[0] += pval[PROM(m)] - pval[PAWN];
		last = -pval[PROM(m)];
	}
	while (ob) {
		for (p = PAWN; p<= QUEEN+1; p++) {
			u64 m;
			int _p = p;
			if (_p == QUEEN +1) _p = KING;
			else if (_p == ENP) continue;
			m = ob & pieceb[_p];
			if (m) {
				int f2 = getLsb(m);
				ob^= BIT[f2];
				slist[n] = slist[n-1] + last;
				n++;
				last = pval[_p];
				break;
			}
		}
		if (!b) break;
		for (p = PAWN; p<= QUEEN+1; p++) {
			u64 m;
			int _p = p;
			if (_p == QUEEN +1) _p = KING;
			else if (_p == ENP) continue;
			m = b & pieceb[_p];
			if (m) {
				int f2 = getLsb(m);
				b^= BIT[f2];
				slist[n] = slist[n-1] + last;
				n++;
				last = -pval[_p];
				break;
			}
		}
	}
	n--;
   while (n)
   {
      if (n & 1)
      {
         if (slist[n] <= slist[n-1])
	    slist[n-1] = slist[n]; 
      }
      else
      {
         if (slist[n] >= slist[n-1])
	    slist[n-1] = slist[n]; 
      }
      n--;
   }
   return (slist[0]);
}


void generateChecks(int c, int ply) {
	int f, k = kingpos[c^1];
	int *mn = movenum + ply;
	int *ml = movelist + (ply << 8);
	u64 m, b, cb = colorb[c];
	u64 pin = pinnedPieces(f, c^1);
	*mn = 0;

	b = n2moves[k] & cb & pieceb[KNIGHT] & (~pin);
	while (b) {
		f = pullLsb(&b);
		m = nmoves[f] & nmoves[k];
		registerMoves(PREMOVE(f, KNIGHT), 0LL, m, ml, mn);
	}
}

