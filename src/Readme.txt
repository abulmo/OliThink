olithink 9 "4R3/2p2pk1/5p2/1p1q1bp1/1Q1P3p/2P2P2/r1P3PP/4N1K1 b - - 0 28"
go
 1   101      0        41  f5xc2
 2   101      0       231  f5xc2 e1xc2
 3   101      0      2145  f5xc2 e1xc2 a2xc2
 4    85      3      9548  f5xc2 e1xc2 a2xc2 h2-h3
 5   105      6     46079  f5xc2 e1xc2 a2xc2 b4-f8 g7-g6 f8-b4
 6    68     57    308527  d5-d6 b4-b1 a2-a3 b1-b4 d6xb4 c3xb4
 7    73     90    667140  d5-d6 b4xb5 f5-d7 b5-b1 a2-a3 e8-b8 a3xc3
 8    68    196   1523953  d5-d6 b4xd6 c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2
 9    68    623   5820580  d5-d6 b4xd6 c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2 b5-b4
 10    52   3226  27164455  d5-d6 b4xd6 c7xd6 e8-b8 f5-d7 b8-d8 a2-a1 d8xd7 a1xe1 g1-f2 e1-e6
28. ... d5-d6

kib Nodes: 5781898 QNodes: 2804386 cs: 625 knps: 931
kib Nodes: 27164455 QNodes: 17333699 cs: 3228 knps: 841

olithink 9 "r3k2r/p1ppqpb1/bn2pnp1/3PN3/1p2P3/2N2Q1p/PPPBBPPP/R3K2R w KQkq -"
go
 1   -23      0        49  e2xa6
 2   -23      0       185  e2xa6 b4xc3
 3   -31      1      2629  e2xa6 e6xd5 c3xd5
 4   -31      4      8450  e2xa6 e6xd5 c3xd5 f6xd5
 5   -59     15     61521  e2xa6 e6xd5 c3xd5 f6xd5 e5-d3
 6   -78     59    234963  e2xa6 e6xd5 c3xd5 f6xd5 e5-d3 f7-f5
 7   -77    285   1394134  d5xe6 a6xe2 c3xe2 e7xe6 d2-f4 g6-g5 e2-d4
 8   -76   1098   5543866  d5xe6 e7xe6 e2xa6 e6xe5 d2-f4 e5-e6 c3-b5 f6-d5
 9  -109   4076  24376368  d5xe6 a6xe2 c3xe2 e7xe6 d2-f4 c7-c5 g2xh3 d7-d6 e5-d3
1. ... d5xe6

kib Nodes: 24376368 QNodes: 22074301 cs: 4076 knps: 597

olithink 8 "1r1q1rk1/5ppp/Qpp1b3/4n3/8/2N1PB2/PPP3PP/R3K2R w KQ - 0 22"
go
 1    93      0        46  e1-g1
 2    78      0       243  a1-d1 d8-h4
 3    66      1      2773  e1-f2 d8-d2 a6-e2 f8-d8
 4    65      4     16526  h2-h4 b8-a8 a6-b7 e5xf3
 5    50     20    110778  a6-e2 e6-c4 e2-d1 e5xf3 d1xf3 d8-d6
 6    31    129    762812  h2-h4 e5-c4 a1-d1 d8-c7 e1-f2 c4xb2
 7    24    442   2983295  h2-h4 e5-c4 a1-d1 d8-c7 e1-f2 c7-e5 d1-d3
 8    16   2220  15924235  a6-e2 d8-h4 e1-d2 f8-d8 d2-c1 e6-c4 e2-e1 e5xf3 g2xf3 g7-g5
22. ... a6-e2

kib Nodes: 15924235 QNodes: 10620582 cs: 2220 knps: 717

olithink 11 "6k1/p7/1p1p4/1PpP3p/2P1q1pP/P5P1/6RQ/5rNK w - - 0 1"
go
 1   191      0         3  a3-a4
 2   191      0        46  a3-a4 e4xc4
 3    86      1       213  a3-a4 e4xc4 g2-f2
 4    86      1      1684  a3-a4 e4xc4 g2-f2 f1xf2
 5    12      1      5720  a3-a4 f1-f2 a4-a5 b6xa5 b5-b6
 6    12      3     29292  a3-a4 f1-f2 a4-a5 b6xa5 b5-b6 a7xb6
 7  -945     18     89325  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3
 8  -945     39    356532  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3
 9 -31990     95    973776  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2
10 -31990    234   2906829  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2 e4xg2
11 -31990    551   6915307  a3-a4 g8-f7 a4-a5 b6xa5 b5-b6 a7xb6 h2-h3 g4xh3 h1-h2 e4xg2
1. ... a3-a4

kib Nodes: 6915307 QNodes: 2646248 cs: 551 knps: 1253

olithink 17 "//3k4///3KR3// w - - 0 1"
go
 1   556      0        18  d3-c4
 2   556      0        63  d3-c4 d6-c6
 3   560      0       407  d3-c4 d6-c6 e3-e6
 4   560      0      1459  d3-c4 d6-c6 e3-e6 c6-c7 c4-d4
 5   560      0      6640  d3-c4 d6-c6 e3-e6 c6-c7 c4-d4 c7-d7
 6   560      1     24465  d3-c4 d6-c6 e3-e6 c6-c7 c4-d4 c7-d7 e6-e5
 7   560      3     71902  d3-c4 d6-c6 e3-e6 c6-c7 c4-d4 c7-d7 e6-a6 d7-c7
 8   564      7    172902  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7
 9   564     17    383079  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-c8 e7-f7
10   564     34    777484  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-c8 e7-f7 c8-d8
11   564     62   1449032  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-c8 e7-f7 c8-d8 c5-d4
12   564    101   2462490  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-c8 e7-f7 c8-d8 c5-d4 d8-c8
13   568    156   3830748  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-c8 c5-c6 c8-b8 e7-e6 b8-a8 e6-e8
14   568    225   5632724  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-d8 c5-d6 d8-c8 e7-f7 c8-b8 f7-c7 b8-a8
15   568    306   7774126  d3-c4 d6-c6 e3-e6 c6-c7 c4-c5 c7-d7 e6-e5 d7-c7 e5-e7 c7-d8 c5-d6 d8-c8 e7-f7 c8-b8 f7-c7 b8-a8 d6-e6
16 31983    396  10274228  d3-c4 d6-c6 e3-d3 c6-b6 d3-d6 b6-b7 c4-b5 b7-c7 d6-d5 c7-b7 d5-c5 b7-a7 b5-c6 a7-a6 c6-c7 a6-a7 c5-a5
17 31983    496  13027042  d3-c4 d6-c6 e3-d3 c6-b6 d3-d6 b6-b7 c4-b5 b7-c7 d6-d5 c7-b7 d5-c5 b7-a7 b5-c6 a7-a6 c6-c7 a6-a7 c5-a5
1. ... d3-c4

kib Nodes: 13027042 QNodes: 235337 cs: 497 knps: 2621

olithink 8 "1r2k1r1/pbppnp1p/1bn2P2/7q/Q7/B1PB1N2/P4PPP/3RR1K1 b - - 0 19"
go
 1   496      0        46  h5xf3
 2   698      1       350  h5xf3 d3-f1
 3   698      4      2881  h5xf3 d3-f1 f3xf2
 4   749      9     12895  h5xf3 d3-e4 b6xf2 g1-h1 f3xf6
 5   188     78    193166  h5xf3 e1xe7 e8-d8 d3-e4 f3xf2 g1-h1 f2xf6
 6   188    140    451754  h5xf3 e1xe7 e8-d8 d3-e4 f3xf2 g1-h1 f2xf6 e7xd7
 7   172    507   2046693  h5-h3 d3-f1 h3-f5 a3xe7 f5xf3 e7-c5 e8-d8 c5-e7
 8   138   2065  10077152  h5-h3 d3-f1 h3-f5 a3xe7 f5xf3 g1-h1 f3-f5 e7-c5
19. ... h5-h3

kib Nodes: 10077152 QNodes: 15653620 cs: 2065 knps: 487

olithink 9 "2k3r1/5p1p/p3bp2/1pn4q/2p1B3/4QN1P/PPP2PP1/2KR4 b - - 0 21"
ggo
 1   178      0        39  c5xe4
 2   178      0       282  c5xe4 e3xe4
 3   178      1      1778  c5xe4 e3xe4 g8xg2
 4   180      1      9932  c5xe4 e3xe4 g8xg2 e4-a8
 5    92     18    113284  g8xg2 d1-d5 e6xd5 e3xc5 c8-d7 c5xd5
 6    92     42    301868  g8xg2 d1-d5 e6xd5 e3xc5 c8-d7 c5xd5 h5xd5 e4xd5
 7    84    143   1096231  g8xg2 d1-d5 c5-d3 c2xd3 e6xd5 e3-c5 c8-b8 c5xd5 h5xd5
 8    71    534   4473309  g8xg2 d1-d5 c5-d3 c2xd3 e6xd5 e3-c5 c8-d8 e4xd5 c4xd3 f3-d2
 9    52   3485  27580291  c5xe4 e3xe4 c8-c7 e4-e3 g8xg2 e3-a7 c7-c8 a7xa6 c8-c7 a6-a7 c7-c8 a7-a8
21. ... c5xe4

kib Nodes: 27580291 QNodes: 19417279 cs: 3486 knps: 791

olithink 12 "8/8/1P1p4/K1p2r2/4P1Pk/8/1R3p2/8 w - - 0 5"
go
 1    16      0        18  b6-b7
 2    22      0        76  b6-b7 f2-f1q
 3    22      0       411  b6-b7 f2-f1q b7-b8q
 4  -105      0      1987  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q
 5  -116      1      5863  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q f1-a1
 6  -122      4     16089  b6-b7 f2-f1q b2-h2 h4xg4 b7-b8q f1-a1 a5-b6 a1-e5
 7  -270     17     75020  b6-b7 f2-f1q b2-h2 h4-g3 g4xf5 f1-b1 h2-h7 b1-b4
 8  -279     21    142001  g4xf5 f2-f1q b2-h2 h4-g3 b6-b7 f1-b1 h2-h7 g3-f3 h7-e7
 9  -286     34    285404  g4xf5 f2-f1q b2-h2 h4-g3 b6-b7 f1-b1 h2-h7 g3-f3 h7-e7 b1-b4
10  -264     68    699934  b2xf2 f5xf2 b6-b7 f2-b2 a5-a6 h4xg4 a6-a7 b2-a2 a7-b6 a2-b2 b6-c7 d6-d5
11  -264    131   1483708  b2xf2 f5xf2 b6-b7 f2-b2 a5-a6 h4xg4 a6-a7 b2-a2 a7-b6 a2-b2 b6-c7 d6-d5 b7-b8q
12  -264    893  10810253  b2-b1 f2-f1q b1xf1 f5xf1 b6-b7 f1-b1 a5-a6 h4xg4 a6-a7 b1-a1 a7-b6 a1-b1 b6-c7 d6-d5
5. ... b2-b1

kib Nodes: 10810253 QNodes: 4448098 cs: 895 knps: 1207


[Event "Computer chess game"]
[Site "TARN"]
[Date "2008.01.03"]
[Round "-"]
[White "olithink501"]
[Black "olithink413"]
[Result "1-0"]
[TimeControl "40/120"]

1. e4 e5 2. Nc3 Nc6 3. Nf3 Nf6 4. d4 exd4 5. Nxd4 Bb4 6. f3 Bxc3+ 7. bxc3
Ne5 8. f4 Nxe4 9. Qe2 d5 10. fxe5 Qh4+ 11. g3 Nxg3 12. hxg3 Qxh1 13. Nb5
O-O 14. Nxc7 Rb8 15. Be3 b6 16. O-O-O Kh8 17. Bg2 Qh2 18. Qf2 Qh5 19. Qf4
Bf5 20. Nxd5 Qe2 21. Qxf5 Qxg2 22. c4 Rbe8 23. g4 Qh2 24. Bd4 Rc8 25. Ne3
Qh6 26. Kb2 Rcd8 27. Nd5 Rc8 28. Be3 Qh2 29. Kb3 h6 30. Ne7 Ra8 31. Qh5 Qg3
32. Nf5 Qf3 33. Rd6 f6 34. exf6 Rxf6 35. Rxf6 Qb7 36. Rxh6+ gxh6 37. Qxh6+
Qh7 38. Qf6+ Kg8 39. Nh6+ Qxh6 40. Bxh6 Re8 41. Qg7#
{White mates} 1-0




[Event "Computer chess game"]
[Site "TARN-PC"]
[Date "2008.01.02"]
[Round "-"]
[White "GNUChess"]
[Black "olithink"]
[Result "0-1"]
[TimeControl "40/60"]

1. e4 d5 2. exd5 Qxd5 3. Nc3 Qe6+ 4. Nge2 c5 5. d4 cxd4 6. Qxd4 Nc6 7. Qd1
Nf6 8. Be3 Qe5 9. h3 h5 10. Nd4 g6 11. Bb5 Bd7 12. Qd3 a5 13. Nf3 Qc7 14.
O-O-O Bf5 15. Qc4 Bh6 16. Bxh6 Rxh6 17. Rhe1 Be6 18. Qc5 Kf8 19. Ng5 Bf5
20. Re3 Rc8 21. g4 hxg4 22. Bxc6 bxc6 23. Qc4 e6 24. Qd4 Qe7 25. Re5 Rh5
26. h4 Nd5 27. Nge4 f6 28. Nxf6 Nxf6 29. Rxa5 Rxh4 30. Ra7 e5 31. Qb6 Bd7
32. Ne4 Nd5 33. Qa5 Rd8 34. c4 Nf4 35. Nc5 Ne2+ 36. Kd2 Nd4 37. Rxd7 Rxd7
38. Nxd7+ Qxd7 39. Kc1 Rh5 40. b3 Kg7 41. Kb2 Qf7 42. Rd2 Qf4 43. Qc7+ Kh6
44. Qa5 Rh2 45. Ka3 g3 46. Rd1 Qxf2 47. Kb4 Qe2 48. Qa8 Qxd1 49. Qh8+ Kg5
50. Qxe5+ Nf5 51. a3 Rh4 52. Qc5 g2 53. Qf2 g1=Q 54. Qxg1+ Qxg1 55. a4 Qb6+
56. Kc3 Rh3+ 57. Kd2 Qf2+ 58. Kc1 Rh1#
{Black mates} 0-1

START
go
 1    72      0        29  c7xd6
 2    84      0       108  c7xd6 e8-e2
 3    96      0       737  c7xd6 e8-b8 a2-a1
 4    88      0      2417  c7xd6 e8-b8 a2-a1 g1-f2
 5    80      3     11104  c7xd6 e8-b8 a2-a1 g1-f2 f5-d7
 6    68      7     36255  c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2
 7    68     18    126474  c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2 b5-b4
 8    52     40    400679  c7xd6 e8-b8 f5-d7 b8-d8 a2-a7 e1-d3 a7-a1 g1-f2 a1-a7
 9    60     96   1156527  c7xd6 e8-b8 f5-d7 b8-b7 a2-a1 g1-f2 d7-e8 e1-d3 e8-c6
10    60    264   3291334  c7xd6 e8-b8 f5xc2 b8xb5 c2-g6 b5-b8 d6-d5 g1-f1 a2-a3 b8-c8
2. ... c7xd6

kib Nodes: 3291334 cs: 264 knps: 1246


sd 10
b4d6
 1    72      1        29  c7xd6
 2    84      1       108  c7xd6 e8-e2
 3    96      1       715  c7xd6 e8-b8 a2-a1
 4    88      1       959  c7xd6 e8-b8 a2-a1 g1-f2
 5    80      1      1227  c7xd6 e8-b8 a2-a1 g1-f2 f5-d7
 6    68      3      2513  c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2
 7    68      3      3222  c7xd6 e8-b8 a2-b2 c3-c4 b2-b1 g1-f2 b5-b4
 8    52     32    277017  c7xd6 e8-b8 a2-a5 e1-d3 f5-e6 g2-g4 a5-a1 g1-f2 e6-c4
 9    60     92   1045978  c7xd6 e8-b8 a2-a1 g1-f2 f5-d7 b8-b7 d7-e8 e1-d3 e8-c6
10    60    248   3090381  c7xd6 e8-b8 f5xc2 b8xb5 c2-g6 b5-b8 a2-a3 c3-c4 a3-a4 b8-c8
29. ... c7xd6

kib Nodes: 3090381 cs: 250 knps: 1235






	if (0 && !ch && null && d >= 3 && ply) {
		generateMoves(ch, c, ply);
		if (movenum[ply] > 5) {
			flags &= 960;
			w = -search(c^1, d - 3, ply + 1, -beta, -beta + 1, 0);
			flags = flagstore;

			if (w >= beta) {
				hashDB[hb & HMASK] = (hb & HINV) | (w + 32768); 
				return beta;
			}
		}
	}




========================================================================
    CONSOLE APPLICATION : OliThink Project Overview
========================================================================

AppWizard has created this OliThink application for you.  

This file contains a summary of what you will find in each of the files that
make up your OliThink application.


OliThink.vcproj
    This is the main project file for VC++ projects generated using an Application Wizard. 
    It contains information about the version of Visual C++ that generated the file, and 
    information about the platforms, configurations, and project features selected with the
    Application Wizard.

OliThink.cpp
    This is the main application source file.

/////////////////////////////////////////////////////////////////////////////
Other standard files:

StdAfx.h, StdAfx.cpp
    These files are used to build a precompiled header (PCH) file
    named OliThink.pch and a precompiled types file named StdAfx.obj.

/////////////////////////////////////////////////////////////////////////////
Other notes:

AppWizard uses "TODO:" comments to indicate parts of the source code you
should add to or customize.

/////////////////////////////////////////////////////////////////////////////

int slist[128];
int swap(Move m) {
	int p, last, f = FROM(m);
	int t = TO(m);
	int c = ONMV(m);
	int oc = c^1;
	int n = 1;
	u64 b = (attacked(t, oc) ^ BIT[f]) & (~pinnedPieces(kingpos[c], c));
	u64 ob = attacked(t, c) & (~pinnedPieces(kingpos[oc], oc));
	slist[0] = pval[CAP(m)];
	last = -pval[PIECE(m)];
	if (PROM(m)) {
		slist[0] += pval[PROM(m)] - pval[PAWN];
		last = -pval[PROM(m)];
	}
	while (ob) {
		for (p = PAWN; p<= QUEEN+1; p++) {
			u64 m;
			int _p = p;
			if (_p == QUEEN +1) _p = KING;
			else if (_p == ENP) continue;
			m = ob & pieceb[_p];
			if (m) {
				int f2 = getLsb(m);
				ob^= BIT[f2];
				slist[n] = slist[n-1] + last;
				n++;
				last = pval[_p];
				break;
			}
		}
		if (!b) break;
		for (p = PAWN; p<= QUEEN+1; p++) {
			u64 m;
			int _p = p;
			if (_p == QUEEN +1) _p = KING;
			else if (_p == ENP) continue;
			m = b & pieceb[_p];
			if (m) {
				int f2 = getLsb(m);
				b^= BIT[f2];
				slist[n] = slist[n-1] + last;
				n++;
				last = -pval[_p];
				break;
			}
		}
	}
	n--;
   while (n)
   {
      if (n & 1)
      {
         if (slist[n] <= slist[n-1])
	    slist[n-1] = slist[n]; 
      }
      else
      {
         if (slist[n] >= slist[n-1])
	    slist[n-1] = slist[n]; 
      }
      n--;
   }
   return (slist[0]);
}


void generateChecks(int c, int ply) {
	int f, k = kingpos[c^1];
	int *mn = movenum + ply;
	int *ml = movelist + (ply << 8);
	u64 m, b, cb = colorb[c];
	u64 pin = pinnedPieces(f, c^1);
	*mn = 0;

	b = n2moves[k] & cb & pieceb[KNIGHT] & (~pin);
	while (b) {
		f = pullLsb(&b);
		m = nmoves[f] & nmoves[k];
		registerMoves(PREMOVE(f, KNIGHT), 0LL, m, ml, mn);
	}
}

